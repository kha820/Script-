repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

-- Giữ map sáng, không tối
pcall(function()
    Lighting.Brightness = 2
    Lighting.ClockTime = 14
    Lighting.FogEnd = 1000000
    Lighting.GlobalShadows = false
end)

-- Danh sách CHỈ EFFECT cần xoá
local EffectClasses = {
    "ParticleEmitter",
    "Trail",
    "Beam",
    "Fire",
    "Smoke",
    "Sparkles",
    "Explosion",
    "Highlight",
    "BlurEffect",
    "BloomEffect",
    "SunRaysEffect",
    "ColorCorrectionEffect",
    "DepthOfFieldEffect",
    "Atmosphere",
    "Clouds"
}

local function IsEffect(obj)
    for _, c in ipairs(EffectClasses) do
        if obj:IsA(c) then
            return true
        end
    end
    return false
end

-- Xoá CHỈ effect
local function Clean(obj)
    pcall(function()
        if IsEffect(obj) then
            obj:Destroy()
        end
    end)
end

-- Quét toàn map 1 lần
for _, v in pairs(Workspace:GetDescendants()) do
    Clean(v)
end

-- Khi có effect mới spawn → xoá ngay
Workspace.DescendantAdded:Connect(function(obj)
    Clean(obj)
end)

-- Khi respawn → quét lại
player.CharacterAdded:Connect(function()
    task.wait(1)
    for _, v in pairs(Workspace:GetDescendants()) do
        Clean(v)
    end
end)

-- Dọn lại định kỳ
task.spawn(function()
    while true do
        task.wait(5)
        for _, v in pairs(Workspace:GetDescendants()) do
            Clean(v)
        end
    end
end)

print("✅ NO EFFECT MODE ON (KEEP MAP + NPC + PLAYER)")
